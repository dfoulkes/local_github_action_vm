- name: install development environment with custom configuration for a dev machine
  hosts: all 
  roles:
    - role: geerlingguy.docker
    - role: githubixx.kubectl
    - role: gantsign.helm
    - role: christiangda.awscli
    - role: christiangda.awscli_configure
    - role: buildAgent
  vars:
    awscliconf_path: '/home/vagrant'
    awscliconf_files_owner: 'vagrant'
    awscliconf_files_group: 'vagrant'  
    awscliconf_files:
            credentials:
              - default:
                  aws_access_key_id: !vault |
                                      $ANSIBLE_VAULT;1.1;AES256
                                      63333764383066376461383037363036366337613862626662396439616261366337386266303635
                                      3663663366356236643234333166316233616134383337350a643331366561343561383737663561
                                      65613363323233313162656339623661616634316538396364316339303531336439343136346133
                                      3332616138323537640a336233613065326361343132346536356634356136376262376633396231
                                      66313862333235646334396231626538303130376361303561636361333866366339
                  aws_secret_access_key: !vault |
                                          $ANSIBLE_VAULT;1.1;AES256
                                          65326664303436313361333161323739363434336137323734333333386337626331653061353330
                                          3637303763346438343634636132393539663063396333300a386532343035323930303736636663
                                          38616134623432353633663265613934653463316165326235313464633431396165353035623961
                                          3136386364316236380a666261613033353937373262333565383438393665643332633530383033
                                          65623238646466353636363735656434393530313962356232356630316265383730373033633838
                                          6637643035386161356637306561356139316666373566656631
            config:
              - default:
                  region: eu-west-1
                  output: yaml
   # Where to install "kubectl" binary
    kubectl_bin_directory: "/usr/local/bin"
    # Directory to store the kubectl archive
    kubectl_tmp_directory: "{{ lookup('env', 'TMPDIR') | default('/tmp',true) }}"
    # Owner of "kubectl" binary
    kubectl_owner: "root"
    kubectl_binary_mode: "0755"
    helm_version: '3.9.4'
    github_linux_runner_version: "2.296.1"
    github_action_installation_dir: "/opt/actions-runner"
    # GitHub address
    github_runtime_user: vagrant
    github_url: "https://github.com"
    # GitHub API
    github_api_url: "https://api.github.com"

    # encrypted github token requires local password to use.
    github_access_token: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35653062316135613364383432326564623636393332326331303333326463656138663930303961
          3361333630363436376335653230333038386231356432660a383536396562323733366339633330
          61313261386230623365373936396230633937646466653939303366313133636331313132336231
          3032376530656464310a613865653337346665373166633237303866616666316634646134303339
          38343439616363393639363262326539386631326664326130376462613938393132396138343433
          3031323064366238366238666432303335323562316137376536
    github_owner: "dfoulkes"
    github_repo_pihole: "pihole-kubernetes"
    github_repo_k8s_monitoring: "cluster-monitor"
    github_repo_k8s_blog: "personal-blog"

    k8s_blog_agent_name: "blogLocal"
    k8s_monitoring_agent_name: "k8smonLocal"
    pi_hole_agent_name: "PiHoleLocal"
    pi_hole_runner_group: ""
  become: yes
  become_method: sudo 